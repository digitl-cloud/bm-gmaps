!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=127)}([function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var i=n(19)("wks"),r=n(17),o=n(0).Symbol,a="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=a&&o[t]||(a?o:r)("Symbol."+t))}).store=i},function(t,e,n){t.exports=!n(5)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(4);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var i=n(3),r=n(20),o=n(18),a=Object.defineProperty;e.f=n(2)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(6),r=n(21);t.exports=n(2)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(0),r=n(7),o=n(9),a=n(17)("src"),c=n(47),s=(""+c).split("toString");n(11).inspectSource=function(t){return c.call(t)},(t.exports=function(t,e,n,c){var u="function"==typeof n;u&&(o(n,"name")||r(n,"name",e)),t[e]!==n&&(u&&(o(n,a)||r(n,a,t[e]?""+t[e]:s.join(String(e)))),t===i?t[e]=n:c?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||c.call(this)})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(39),r=n(10);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(0),r=n(11),o=n(7),a=n(8),c=n(22),s=function(t,e,n){var u,l,g,f,d=t&s.F,h=t&s.G,p=t&s.S,v=t&s.P,m=t&s.B,_=h?i:p?i[e]||(i[e]={}):(i[e]||{}).prototype,y=h?r:r[e]||(r[e]={}),b=y.prototype||(y.prototype={});for(u in h&&(n=e),n)g=((l=!d&&_&&void 0!==_[u])?_:n)[u],f=m&&l?c(g,i):v&&"function"==typeof g?c(Function.call,g):g,_&&a(_,u,g,t&s.U),y[u]!=g&&o(y,u,f),v&&b[u]!=g&&(b[u]=g)};i.core=r,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var i=n(12),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){var i=n(4);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var i=n(11),r=n(0),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(26)?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){t.exports=!n(2)&&!n(5)(function(){return 7!=Object.defineProperty(n(24)("div"),"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(33);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var i=n(10);t.exports=function(t){return Object(i(t))}},function(t,e,n){var i=n(4),r=n(0).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,n){"use strict";var i=n(3);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e){t.exports=!1},,function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){"use strict";var i=n(42)(!0);t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},function(t,e,n){"use strict";var i=n(35),r=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},function(t,e,n){"use strict";n(50);var i=n(8),r=n(7),o=n(5),a=n(10),c=n(1),s=n(32),u=c("species"),l=!o(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),g=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var f=c(t),d=!o(function(){var e={};return e[f]=function(){return 7},7!=""[t](e)}),h=d?!o(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[u]=function(){return n}),n[f](""),!e}):void 0;if(!d||!h||"replace"===t&&!l||"split"===t&&!g){var p=/./[f],v=n(a,f,""[t],function(t,e,n,i,r){return e.exec===s?d&&!r?{done:!0,value:p.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}),m=v[0],_=v[1];i(String.prototype,t,m),r(RegExp.prototype,f,2==e?function(t,e){return _.call(t,this,e)}:function(t){return _.call(t,this)})}}},function(t,e,n){"use strict";var i,r,o=n(25),a=RegExp.prototype.exec,c=String.prototype.replace,s=a,u=(i=/a/,r=/b*/g,a.call(i,"a"),a.call(r,"a"),0!==i.lastIndex||0!==r.lastIndex),l=void 0!==/()??/.exec("")[1];(u||l)&&(s=function(t){var e,n,i,r,s=this;return l&&(n=new RegExp("^"+s.source+"$(?!\\s)",o.call(s))),u&&(e=s.lastIndex),i=a.call(s,t),u&&i&&(s.lastIndex=s.global?i.index+i[0].length:e),l&&i&&i.length>1&&c.call(i[0],n,function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)}),i}),t.exports=s},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(19)("keys"),r=n(17);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,n){var i=n(15),r=n(1)("toStringTag"),o="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?n:o?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var i=n(9),r=n(13),o=n(43)(!1),a=n(34)("IE_PROTO");t.exports=function(t,e){var n,c=r(t),s=0,u=[];for(n in c)n!=a&&i(c,n)&&u.push(n);for(;e.length>s;)i(c,n=e[s++])&&(~o(u,n)||u.push(n));return u}},,function(t,e,n){var i=n(15);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){var i=n(37),r=n(28).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){var i=n(4),r=n(15),o=n(1)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},function(t,e,n){var i=n(12),r=n(10);t.exports=function(t){return function(e,n){var o,a,c=String(r(e)),s=i(n),u=c.length;return s<0||s>=u?t?"":void 0:(o=c.charCodeAt(s))<55296||o>56319||s+1===u||(a=c.charCodeAt(s+1))<56320||a>57343?t?c.charAt(s):o:t?c.slice(s,s+2):a-56320+(o-55296<<10)+65536}}},function(t,e,n){var i=n(13),r=n(16),o=n(48);t.exports=function(t){return function(e,n,a){var c,s=i(e),u=r(s.length),l=o(a,u);if(t&&n!=n){for(;u>l;)if((c=s[l++])!=c)return!0}else for(;u>l;l++)if((t||l in s)&&s[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var i=n(36),r=n(21),o=n(13),a=n(18),c=n(9),s=n(20),u=Object.getOwnPropertyDescriptor;e.f=n(2)?u:function(t,e){if(t=o(t),e=a(e,!0),s)try{return u(t,e)}catch(t){}if(c(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e,n){"use strict";var i=n(0),r=n(6),o=n(2),a=n(1)("species");t.exports=function(t){var e=i[t];o&&e&&!e[a]&&r.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var i=n(3),r=n(23),o=n(16),a=n(12),c=n(29),s=n(30),u=Math.max,l=Math.min,g=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g;n(31)("replace",2,function(t,e,n,h){return[function(i,r){var o=t(this),a=null==i?void 0:i[e];return void 0!==a?a.call(i,o,r):n.call(String(o),i,r)},function(t,e){var r=h(n,t,this,e);if(r.done)return r.value;var g=i(t),f=String(this),d="function"==typeof e;d||(e=String(e));var v=g.global;if(v){var m=g.unicode;g.lastIndex=0}for(var _=[];;){var y=s(g,f);if(null===y)break;if(_.push(y),!v)break;""===String(y[0])&&(g.lastIndex=c(f,o(g.lastIndex),m))}for(var b,w="",x=0,S=0;S<_.length;S++){y=_[S];for(var k=String(y[0]),E=u(l(a(y.index),f.length),0),M=[],I=1;I<y.length;I++)M.push(void 0===(b=y[I])?b:String(b));var C=y.groups;if(d){var O=[k].concat(M,E,f);void 0!==C&&O.push(C);var j=String(e.apply(void 0,O))}else j=p(k,f,E,M,C,e);E>=x&&(w+=f.slice(x,E)+j,x=E+k.length)}return w+f.slice(x)}];function p(t,e,i,o,a,c){var s=i+t.length,u=o.length,l=d;return void 0!==a&&(a=r(a),l=f),n.call(c,l,function(n,r){var c;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(s);case"<":c=a[r.slice(1,-1)];break;default:var l=+r;if(0===l)return n;if(l>u){var f=g(l/10);return 0===f?n:f<=u?void 0===o[f-1]?r.charAt(1):o[f-1]+r.charAt(1):n}c=o[l-1]}return void 0===c?"":c})}})},function(t,e,n){t.exports=n(19)("native-function-to-string",Function.toString)},function(t,e,n){var i=n(12),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=i(t))<0?r(t+e,0):o(t,e)}},,function(t,e,n){"use strict";var i=n(32);n(14)({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},function(t,e,n){"use strict";var i=n(3),r=n(16),o=n(29),a=n(30);n(31)("match",1,function(t,e,n,c){return[function(n){var i=t(this),r=null==n?void 0:n[e];return void 0!==r?r.call(n,i):new RegExp(n)[e](String(i))},function(t){var e=c(n,t,this);if(e.done)return e.value;var s=i(t),u=String(this);if(!s.global)return a(s,u);var l=s.unicode;s.lastIndex=0;for(var g,f=[],d=0;null!==(g=a(s,u));){var h=String(g[0]);f[d]=h,""===h&&(s.lastIndex=o(u,r(s.lastIndex),l)),d++}return 0===d?null:f}]})},function(t,e,n){var i=n(0),r=n(53),o=n(6).f,a=n(40).f,c=n(41),s=n(25),u=i.RegExp,l=u,g=u.prototype,f=/a/g,d=/a/g,h=new u(f)!==f;if(n(2)&&(!h||n(5)(function(){return d[n(1)("match")]=!1,u(f)!=f||u(d)==d||"/a/i"!=u(f,"i")}))){u=function(t,e){var n=this instanceof u,i=c(t),o=void 0===e;return!n&&i&&t.constructor===u&&o?t:r(h?new l(i&&!o?t.source:t,e):l((i=t instanceof u)?t.source:t,i&&o?s.call(t):e),n?this:g,u)};for(var p=function(t){t in u||o(u,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},v=a(l),m=0;v.length>m;)p(v[m++]);g.constructor=u,u.prototype=g,n(8)(i,"RegExp",u)}n(45)("RegExp")},function(t,e,n){var i=n(4),r=n(54).set;t.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&i(o)&&r&&r(t,o),t}},function(t,e,n){var i=n(4),r=n(3),o=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=n(22)(Function.call,n(44).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:o}},,,,,function(t,e,n){var i=n(6).f,r=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in r||n(2)&&i(r,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},,,,,,,,,,,,,,function(t,e,n){var i=n(3),r=n(33),o=n(1)("species");t.exports=function(t,e){var n,a=i(t).constructor;return void 0===a||null==(n=i(a)[o])?e:r(n)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){t.exports=n(128)},function(t,e,n){"use strict";n.r(e);n(46),n(52),n(51),n(129),n(59);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name="feedback",this.tagManager=e,this.tagManager.registerAction(this.name,"send_rating","sendRating"),this.prefix={visited:"cbt_visited_",reviewed:"cbt_reviewed_",send_rating:"cbt_send_rating"},this.widget=null,this.widgetPostionClass=null,this.uniqueID=null,this.triggeredOpen=!1,this.config=null,this.isMobile=this.isSmallDevice(),this.initFeedbackWidget()}var e,n,r;return e=t,r=[{key:"register",value:function(e){return new t(e)}}],(n=[{key:"createFeedbackWidget",value:function(t,e){var n=this,i=document.createElement("div");this.widgetPostionClass=" cbt-"+this.config.settings.widget_position+"-bottom",i.className=e+this.widgetPostionClass,i.id=this.uniqueID,this.isSmallDevice()&&(i.className=i.className+" cbt-mobile"),document.body.appendChild(i);var r=document.createElement("iframe");r.allowfullscreen=!0,r.allowtransparency=!0,-1===navigator.userAgent.indexOf("MSIE")?r.src=t:r.location=t,i.appendChild(r),r.dataset.cbt="true",r.onload=function(){var t=n.config;t.parent={width:window.innerWidth,origin:window.origin},n.emitEvent("cbt_setup_widget",{config:t}),n.setTriggers()},this.widget=i}},{key:"injectRichSnippet",value:function(){if(this.config&&this.config.review&&this.config.review.count>0){var t={"@context":"http://schema.org/","@type":"Product",name:document.title||document.location.href,review:{"@type":"Review",reviewRating:{"@type":"Rating",ratingValue:this.config.review.avg_value,bestRating:this.config.review.max},author:{"@type":"Organization",name:document.location.hostname}},aggregateRating:{"@type":"AggregateRating",ratingValue:this.config.review.avg_value,bestRating:this.config.review.max,worstRating:this.config.review.min,ratingCount:this.config.review.count}},e=document.createElement("script");e.setAttribute("type","application/ld+json"),e.innerHTML=JSON.stringify(t),document.getElementsByTagName("head")[0].appendChild(e)}}},{key:"setTriggers",value:function(){var t=this;if("open_widget_by_scroll_pct"===this.config.settings.open_widget_settings){var e=parseInt(this.config.settings.open_widget_by_scroll_pct)||10;if(this.isMobile&&(e=parseInt(this.config.settings.open_widget_by_scroll_pct_mobile)||10),e&&this.isScrollable())return void(this.getScrollPercentage()>e&&!this.triggeredOpen?(this.hasClass(this.widget,"cbt-open-messenger")||this.emitEvent("cbt_trigger_open_feedback_widget",{}),this.triggeredOpen=!0):window.addEventListener("scroll",function(){t.getScrollPercentage()>e&&!t.triggeredOpen&&(t.hasClass(t.widget,"cbt-open-messenger")||t.emitEvent("cbt_trigger_open_feedback_widget",{}),t.triggeredOpen=!0)}))}if("open_widget_by_timing"===this.config.settings.open_widget_settings){var n=this.config.settings.open_widget_by_timing||null;if(this.isMobile&&(n=this.config.settings.open_widget_by_timing_mobile||null),n){var i=1e3*parseInt(n);setTimeout(function(){t.hasClass(t.widget,"cbt-open-messenger")||t.emitEvent("cbt_trigger_open_feedback_widget",{}),t.triggeredOpen=!0},i)}}}},{key:"adjustHeight",value:function(t){document.getElementById(this.uniqueID).setAttribute("style","height: "+t+"px;"),document.getElementById(this.uniqueID).style.height=t+"px;"}},{key:"initFeedbackWidget",value:function(){var t=this;this.tagManager.api.post("feedback/widget/"+this.tagManager.getInstanceId()+"/config",{instance_id:this.tagManager.getInstanceId(),client:this.tagManager.getClient(),url:window.location.href,client_session_id:this.tagManager.getClientSessionId(),request_timestamp:this.tagManager.getTimeStamp()}).then(function(t){return t.json()}).then(function(e){if(e.error)t.tagManager.log(e.error);else{t.tagManager.log("Getting feedback info from the API was successful."),t.config=e.config,t.uniqueID=t.config.unique_id;var n=e.style,i=e.iframe.class;t.config.settings.bottom_padding&&(n=n+"."+i+"{bottom:"+t.config.settings.bottom_padding+"px;}"),t.config.settings.right_padding&&(n=n+"."+i+".cbt-right-bottom{right:"+t.config.settings.right_padding+"px;}"),t.config.settings.left_padding&&(n=n+"."+i+".cbt-left-bottom{left:"+t.config.settings.left_padding+"px;}"),t.injectCSS(n),t.createFeedbackWidget(e.iframe.url,i),t.setEventListener(),void 0!==t.config.settings.enable_google_rich_snippet&&!0===t.config.settings.enable_google_rich_snippet&&t.injectRichSnippet()}}).catch(function(e){t.tagManager.error(e)})}},{key:"setEventListener",value:function(){var t=this,e=window.addEventListener?"addEventListener":"attachEvent";(0,window[e])("attachEvent"===e?"onmessage":"message",function(e){var n=e[e.message?"message":"data"];t.processEvents(n)},!1),window.addEventListener("resize",function(){t.isMobile=t.isSmallDevice();var e=document.getElementById(t.uniqueID);e&&(t.isMobile?t.addClass(e,"cbt-mobile"):t.removeClass(e,"cbt-mobile"))})}},{key:"processEvents",value:function(t){var e=this;if(t.event_id===this.prefix.send_rating){var n=t.data;window.cbt("send_rating",n.widget_id,n.rating_value,n.rating_comment)}"open_window"===t.event_id&&(this.addClass(this.widget,"cbt-open-messenger"),this.isSmallDevice()&&this.removeClass(this.widget,this.trim(this.widgetPostionClass))),"adjust_height"===t.event_id&&this.adjustHeight(t.data),"close_window"===t.event_id&&(this.removeClass(this.widget,"cbt-open-messenger"),this.isSmallDevice()&&this.addClass(this.widget,this.trim(this.widgetPostionClass))),"cbt_remove_feedback"===t.event_id&&setTimeout(function(){e.widget.remove()},1e3*this.config.settings.thank_you_disappear),"cbt_force_remove_feedback"===t.event_id&&this.widget.remove(),"cbt_send_rating_cmt"===t.event_id&&this.sendRatingComment(t.data.rating_id,t.data.rating_text),"cbt_click_tracking"===t.event_id&&this.sendClickTracking(t.data.widget_id)}},{key:"emitEvent",value:function(t,e){if(document.getElementById(this.uniqueID)){var n=document.getElementById(this.uniqueID).firstElementChild;n.contentWindow.postMessage({event_id:t,data:e},n.src)}}},{key:"sendRating",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.tagManager.log("Sending rating to API:"),this.tagManager.api.post("feedback/ratings/"+t,{instance_id:this.tagManager.getInstanceId(),client:this.tagManager.getClient(),url:window.location.href,client_session_id:this.tagManager.getClientSessionId(),request_timestamp:this.tagManager.getTimeStamp(),widget_id:t,feedback:{page_title:document.title||null,max_rating:this.config.settings.max_rating,min_rating:this.config.settings.min_rating,rating_value:e,rating_comment:i}}).then(function(t){return t.json()}).then(function(t){var e=n.prefix.reviewed+n.config.url_hash;n.setStorage(e,n.config.timestamp),n.tagManager.log("Sending the rating to the API was successful."),n.emitEvent("cbt_rating_saved",t.success)}).catch(function(t){n.emitEvent("cbt_rating_error"),n.tagManager.error(t)})}},{key:"sendRatingComment",value:function(t,e){var n=this;this.tagManager.log("Sending rating comment to API:"),this.tagManager.api.post("feedback/ratings/update/"+t,{rating_comment:e}).then(function(t){return t.json()}).then(function(t){n.tagManager.log("Sending the rating comment to the API was successful."),n.emitEvent("cbt_saved_rating_cmt",t.success)}).catch(function(t){n.tagManager.error(t)})}},{key:"sendClickTracking",value:function(t){var e=this;this.tagManager.log("Sending click tracking to API:"),this.tagManager.api.post("feedback/ratings/cta-click/"+t,{instance_id:this.tagManager.getInstanceId(),client:this.tagManager.getClient(),url:window.location.href,client_session_id:this.tagManager.getClientSessionId(),request_timestamp:this.tagManager.getTimeStamp(),widget_id:t}).then(function(t){return t.json()}).then(function(t){e.tagManager.log("Sending click tracking to the API was successful.")}).catch(function(t){e.tagManager.error(t)})}},{key:"isReturnVisitor",value:function(){var t=this.prefix.visited+this.config.url_hash;return this.getStorage(t)}},{key:"isAlreadyRated",value:function(){var t=this.prefix.reviewed+this.config.url_hash;return this.getStorage(t)}},{key:"validateVisitor",value:function(){if(this.config){var t=this.isAlreadyRated();if(t){var e=(this.config.timestamp-parseInt(t))/10,n=parseInt(this.config.settings.rated_visitor_load_after)||3600;return e>=(n*=1e3)}return!0}return!1}},{key:"setStorage",value:function(t,e,n){return this.isSupportLocalStorage()?localStorage.setItem(t,e):this.setCookie(t.value,n)||null}},{key:"getStorage",value:function(t){return this.isSupportLocalStorage()?localStorage.getItem(t)||null:this.getCookie(t)||null}},{key:"setCookie",value:function(t,e,n){var i="";if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),i="; expires="+r.toUTCString()}document.cookie=t+"="+(e||"")+i+"; path=/"}},{key:"getCookie",value:function(t){for(var e=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(e))return r.substring(e.length,r.length)}return null}},{key:"injectCSS",value:function(t){var e=document.createElement("style");e.innerText=t,document.head.appendChild(e)}},{key:"isSupportLocalStorage",value:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}},{key:"isSmallDevice",value:function(){return window.innerWidth<=400}},{key:"hasClass",value:function(t,e){return!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}},{key:"addClass",value:function(t,e){this.hasClass(t,e)||(t.className+=" "+e)}},{key:"removeClass",value:function(t,e){if(this.hasClass(t,e)){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}},{key:"getWindowHeight",value:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0}},{key:"getWindowYscroll",value:function(){return window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop||0}},{key:"getDocHeight",value:function(){return Math.max(document.body.scrollHeight||0,document.documentElement.scrollHeight||0,document.body.offsetHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0,document.documentElement.clientHeight||0)}},{key:"getScrollPercentage",value:function(){return(this.getWindowYscroll()+this.getWindowHeight())/this.getDocHeight()*100}},{key:"isScrollable",value:function(){return this.getWindowHeight()!==this.getDocHeight()}},{key:"trim",value:function(t){return(t||"").replace(/^\s+|\s+$/g,"")}}])&&i(e.prototype,n),r&&i(e,r),t}(),o=null;!o&&window.cbt&&(o=window.cbt),o?o("plugin","feedback",r):console.error("The contentbird Tag Manager is missing!")},function(t,e,n){"use strict";var i=n(41),r=n(3),o=n(73),a=n(29),c=n(16),s=n(30),u=n(32),l=n(5),g=Math.min,f=[].push,d=!l(function(){RegExp(4294967295,"y")});n(31)("split",2,function(t,e,n,l){var h;return h="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!i(t))return n.call(r,t,e);for(var o,a,c,s=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,d=void 0===e?4294967295:e>>>0,h=new RegExp(t.source,l+"g");(o=u.call(h,r))&&!((a=h.lastIndex)>g&&(s.push(r.slice(g,o.index)),o.length>1&&o.index<r.length&&f.apply(s,o.slice(1)),c=o[0].length,g=a,s.length>=d));)h.lastIndex===o.index&&h.lastIndex++;return g===r.length?!c&&h.test("")||s.push(""):s.push(r.slice(g)),s.length>d?s.slice(0,d):s}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,i){var r=t(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,r,i):h.call(String(r),n,i)},function(t,e){var i=l(h,t,this,e,h!==n);if(i.done)return i.value;var u=r(t),f=String(this),p=o(u,RegExp),v=u.unicode,m=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(d?"y":"g"),_=new p(d?u:"^(?:"+u.source+")",m),y=void 0===e?4294967295:e>>>0;if(0===y)return[];if(0===f.length)return null===s(_,f)?[f]:[];for(var b=0,w=0,x=[];w<f.length;){_.lastIndex=d?w:0;var S,k=s(_,d?f:f.slice(w));if(null===k||(S=g(c(_.lastIndex+(d?0:w)),f.length))===b)w=a(f,w,v);else{if(x.push(f.slice(b,w)),x.length===y)return x;for(var E=1;E<=k.length-1;E++)if(x.push(k[E]),x.length===y)return x;w=b=S}}return x.push(f.slice(b)),x}]})}]);